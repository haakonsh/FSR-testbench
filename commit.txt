Changes:

* Added the adc_timer to control the sample rate.
* Reworked the state machine, state counter is not global and controlled in the adc callback.

-compiles sucessfully
